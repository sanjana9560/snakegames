

const questions=[
    {
      "Id_Game": 10,
      "Start_Date": null,
      "Expiry_Date": null,
      "Id_Assessment_question": 79,
      "Id_Assessment": 14,
      "Assessment_Question": "1.भारत के वर्तमान सीईओ कौन हैं?",
      "allow_attempt": 1,
      "Previous_button": 0,
      "Assessment_Type": 4,
      "assessment_question_url": null,
      "Timer": 30,
      "optionList": [
        {
          "Id_Assessment_question_ans": 280,
          "Id_Assessment_question": 79,
          "Answer_Description": "a)गुंजन शाहrn",
          "Right_Ans": 1,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701946587000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 281,
          "Id_Assessment_question": 79,
          "Answer_Description": "b)संदीप कटारिया",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701946621000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 282,
          "Id_Assessment_question": 79,
          "Answer_Description": "ग) क्रिस किर्क",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701946648000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 283,
          "Id_Assessment_question": 79,
          "Answer_Description": "d)इनमें से कोई नहीं",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701946673000)",
          "Id_CmsUser": 21
        }
      ]
    },
    {
      "Id_Game": 10,
      "Start_Date": null,
      "Expiry_Date": null,
      "Id_Assessment_question": 80,
      "Id_Assessment": 14,
      "Assessment_Question": "3.बाटा इंडिया लिमिटेड (BIL) की शुरुआत हुई:rn",
      "allow_attempt": 1,
      "Previous_button": 0,
      "Assessment_Type": 4,
      "assessment_question_url": null,
      "Timer": 30,
      "optionList": [
        {
          "Id_Assessment_question_ans": 288,
          "Id_Assessment_question": 80,
          "Answer_Description": "ए)1894",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701947726000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 289,
          "Id_Assessment_question": 80,
          "Answer_Description": "बी)1931",
          "Right_Ans": 1,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701947748000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 290,
          "Id_Assessment_question": 80,
          "Answer_Description": "ग)1936",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701947769000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 291,
          "Id_Assessment_question": 80,
          "Answer_Description": "घ) उपरोक्त में से कोई नहीं",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701947796000)",
          "Id_CmsUser": 21
        }
      ]
    },
    {
      "Id_Game": 10,
      "Start_Date": null,
      "Expiry_Date": null,
      "Id_Assessment_question": 81,
      "Id_Assessment": 14,
      "Assessment_Question": "4. भारत में 3 विनिर्माण इकाइयों के नाम बताइए।",
      "allow_attempt": 1,
      "Previous_button": 0,
      "Assessment_Type": 4,
      "assessment_question_url": null,
      "Timer": 30,
      "optionList": [
        {
          "Id_Assessment_question_ans": 292,
          "Id_Assessment_question": 81,
          "Answer_Description": "ए) बाटा नगर,",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701947821000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 293,
          "Id_Assessment_question": 81,
          "Answer_Description": "b) बाटा गंज",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701947844000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 294,
          "Id_Assessment_question": 81,
          "Answer_Description": "c) बता शतक",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701947866000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 295,
          "Id_Assessment_question": 81,
          "Answer_Description": "D। उपरोक्त सभी",
          "Right_Ans": 1,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701947885000)",
          "Id_CmsUser": 21
        }
      ]
    },
    {
      "Id_Game": 10,
      "Start_Date": null,
      "Expiry_Date": null,
      "Id_Assessment_question": 82,
      "Id_Assessment": 14,
      "Assessment_Question": "5. बाटा कंपनी की दुनिया भर में ____ उत्पादन इकाई है।",
      "allow_attempt": 1,
      "Previous_button": 0,
      "Assessment_Type": 4,
      "assessment_question_url": null,
      "Timer": 30,
      "optionList": [
        {
          "Id_Assessment_question_ans": 296,
          "Id_Assessment_question": 82,
          "Answer_Description": "ए) 32",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701947915000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 297,
          "Id_Assessment_question": 82,
          "Answer_Description": "बी)34",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701947936000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 298,
          "Id_Assessment_question": 82,
          "Answer_Description": "ग) 26",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701947961000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 299,
          "Id_Assessment_question": 82,
          "Answer_Description": "घ) 26",
          "Right_Ans": 1,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701947977000)",
          "Id_CmsUser": 21
        }
      ]
    },
    {
      "Id_Game": 10,
      "Start_Date": null,
      "Expiry_Date": null,
      "Id_Assessment_question": 83,
      "Id_Assessment": 14,
      "Assessment_Question": "6.BC की उपस्थिति ____ से अधिक देशों में है।",
      "allow_attempt": 1,
      "Previous_button": 0,
      "Assessment_Type": 4,
      "assessment_question_url": null,
      "Timer": 30,
      "optionList": [
        {
          "Id_Assessment_question_ans": 300,
          "Id_Assessment_question": 83,
          "Answer_Description": "ए)50+",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701947998000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 301,
          "Id_Assessment_question": 83,
          "Answer_Description": "बी)70+",
          "Right_Ans": 1,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701948021000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 302,
          "Id_Assessment_question": 83,
          "Answer_Description": "ग)80+",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701948064000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 303,
          "Id_Assessment_question": 83,
          "Answer_Description": "घ)100+",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701948092000)",
          "Id_CmsUser": 21
        }
      ]
    },
    {
      "Id_Game": 10,
      "Start_Date": null,
      "Expiry_Date": null,
      "Id_Assessment_question": 84,
      "Id_Assessment": 14,
      "Assessment_Question": "7.BCP का पूर्ण रूप क्या है?",
      "allow_attempt": 1,
      "Previous_button": 0,
      "Assessment_Type": 4,
      "assessment_question_url": null,
      "Timer": 30,
      "optionList": [
        {
          "Id_Assessment_question_ans": 304,
          "Id_Assessment_question": 84,
          "Answer_Description": "a) बाटा चैट प्रोग्राम",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701948118000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 305,
          "Id_Assessment_question": 84,
          "Answer_Description": "b)बाटा चिल्ड्रेन प्रोग्राम",
          "Right_Ans": 1,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701948144000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 306,
          "Id_Assessment_question": 84,
          "Answer_Description": "c) बाटा कॉर्पोरेशन प्रोग्राम",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701948166000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 307,
          "Id_Assessment_question": 84,
          "Answer_Description": "d)बाटा कंपनी प्रोफाइलrn",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701948192000)",
          "Id_CmsUser": 21
        }
      ]
    },
    {
      "Id_Game": 10,
      "Start_Date": null,
      "Expiry_Date": null,
      "Id_Assessment_question": 85,
      "Id_Assessment": 14,
      "Assessment_Question": "rnrn8)बाटा कंपनी की शुरुआत कब हुई?rn",
      "allow_attempt": 1,
      "Previous_button": 0,
      "Assessment_Type": 4,
      "assessment_question_url": null,
      "Timer": 30,
      "optionList": [
        {
          "Id_Assessment_question_ans": 308,
          "Id_Assessment_question": 85,
          "Answer_Description": "1894rn",
          "Right_Ans": 1,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701948219000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 309,
          "Id_Assessment_question": 85,
          "Answer_Description": "बी) 1856",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701948240000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 310,
          "Id_Assessment_question": 85,
          "Answer_Description": "ग) 1908",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701948263000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 311,
          "Id_Assessment_question": 85,
          "Answer_Description": "घ) 1915",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701948289000)",
          "Id_CmsUser": 21
        }
      ]
    },
    {
      "Id_Game": 10,
      "Start_Date": null,
      "Expiry_Date": null,
      "Id_Assessment_question": 86,
      "Id_Assessment": 14,
      "Assessment_Question": "9. BIL के भारत में ____ संख्या में स्टोर हैं।",
      "allow_attempt": 1,
      "Previous_button": 0,
      "Assessment_Type": 4,
      "assessment_question_url": null,
      "Timer": 30,
      "optionList": [
        {
          "Id_Assessment_question_ans": 312,
          "Id_Assessment_question": 86,
          "Answer_Description": "ए) 1558",
          "Right_Ans": 1,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701948324000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 313,
          "Id_Assessment_question": 86,
          "Answer_Description": "बी) 1200",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701948340000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 314,
          "Id_Assessment_question": 86,
          "Answer_Description": "ग) 1100",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701948370000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 315,
          "Id_Assessment_question": 86,
          "Answer_Description": "घ) 5000",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701948416000)",
          "Id_CmsUser": 21
        }
      ]
    },
    {
      "Id_Game": 10,
      "Start_Date": null,
      "Expiry_Date": null,
      "Id_Assessment_question": 87,
      "Id_Assessment": 14,
      "Assessment_Question": "10.कंप्यूटर सीखना विज्ञान प्रयोगशालाओं तक पहुंच किस कार्यक्रम के अंतर्गत आता है?",
      "allow_attempt": 1,
      "Previous_button": 0,
      "Assessment_Type": 4,
      "assessment_question_url": null,
      "Timer": 30,
      "optionList": [
        {
          "Id_Assessment_question_ans": 316,
          "Id_Assessment_question": 87,
          "Answer_Description": "क) गर्व के साथ आगे बढ़ें।",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701948447000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 317,
          "Id_Assessment_question": 87,
          "Answer_Description": "ख) नन्हीं कली।",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701948467000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 318,
          "Id_Assessment_question": 87,
          "Answer_Description": "ग) एसटीईएम कार्यक्रम।",
          "Right_Ans": 1,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701948492000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 319,
          "Id_Assessment_question": 87,
          "Answer_Description": "घ) हैप्पी फीट।",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701948517000)",
          "Id_CmsUser": 21
        }
      ]
    },
    {
      "Id_Game": 10,
      "Start_Date": null,
      "Expiry_Date": null,
      "Id_Assessment_question": 88,
      "Id_Assessment": 14,
      "Assessment_Question": "2.BIL का पूर्ण रूप क्या है?",
      "allow_attempt": 1,
      "Previous_button": 0,
      "Assessment_Type": 4,
      "assessment_question_url": null,
      "Timer": 30,
      "optionList": [
        {
          "Id_Assessment_question_ans": 284,
          "Id_Assessment_question": 88,
          "Answer_Description": "a) बाटा इंडिया लिमिटrn",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701947631000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 285,
          "Id_Assessment_question": 88,
          "Answer_Description": "b) बाटा इंडियन लिमिटेडrn",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701947650000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 286,
          "Id_Assessment_question": 88,
          "Answer_Description": "c) बाटा इंडिया लिमिटेडrn",
          "Right_Ans": 1,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701947675000)",
          "Id_CmsUser": 21
        },
        {
          "Id_Assessment_question_ans": 287,
          "Id_Assessment_question": 88,
          "Answer_Description": "d)इनमें से कोई नहीं",
          "Right_Ans": 2,
          "Score_Coins": 10,
          "ID_ORGANIZATION": 15,
          "IsActive": "A",
          "Updated_Date_Time": "Date(1701947701000)",
          "Id_CmsUser": 21
        }
      ]
    }
  ]





  
  let rotate = 0;
  let gameInProgress = false;

  document.getElementById('start-page').style.display = 'block';
  document.getElementById('startGame').style.display = 'none';


  function startGame() { // Hide the start page
    document.getElementById('start-page').style.display = 'none';
    document.getElementById('startGame').style.display = '';
    start = true;
    gameInProgress = true;
    musicSound.play();
}


let arr = [];
function startTimer(condition,time){
if(condition==true) {
let timeSet = time;
let settimeDiv = document.getElementById("timer-sec");
  
   arr.push(setInterval(() => {
    // settimeDiv.innerHTML= timeSet;
    settimeDiv.innerHTML = timeSet < 10 ? "0" + timeSet : timeSet;
    // console.log(settimeDiv.innerHTML,"sanju");
  timeSet--;
  if (timeSet===0){
    startTimer(false);
    let element =  document.getElementById("quiz");
    element.style.display="none";
    start=true;
    // if (timeSet < 10) {
      // Add your code here to handle the specific case when time is less than 10
      
  // }
  }
  }, 1000)
   );
}
else if(condition==false){
let settimeDiv = document.getElementById("timer-sec");
settimeDiv.innerHTML="";
  arr.map(el => {
    clearInterval(el);
  })
}
}




// Game Constants & Variables
let inputDir = {x: 0, y: 0}; 
const foodSound = new Audio('food.mp3');
const gameOverSound = new Audio('gameover.mp3');
const moveSound = new Audio('move.mp3');
const musicSound = new Audio('music.mp3');
let speed = 5;
let score = 0;
let lastPaintTime = 0;
let snakeArr = [
    {x: 13, y: 15}
];

food = {x: 6, y: 7};
let start=true;



let scores = 0;

let questionIndex = 0;
function option(key){
  musicSound.pause();

    // console.log("helloworld: option")
    console.log('KeyVal',key);
    console.log('Que',questions[questionIndex-1].optionList[key-1].Right_Ans);
    startTimer(false);
    musicSound.pause();
    if(1 == questions[questionIndex-1].optionList[key-1].Right_Ans){
    let element =  document.getElementById("quiz");
        scores+=1;
        // console.log(scores);
        
        

    

    //    element.remo.innerHTML
       element.style.display="none";
       start=true;
      

    }
    else{
    let element =  document.getElementById("quiz");
     element.style.display="none";
       start=true;   
       musicSound.play();


    }
}

function addQuiz(){
    start=false;
    
    let element =  document.getElementById("quiz");
    
    element.style.display="flex";
    musicSound.pause();

    let questionInput = document.getElementById("ques");
    questionInput.innerHTML = questions[questionIndex].Assessment_Question;
    let option1  = document.getElementById("ans1");
    let option2  = document.getElementById("ans2");
    let option3  = document.getElementById("ans3");
    let option4  = document.getElementById("ans4");


    option1.value = questions[questionIndex].optionList[0].Answer_Description;
    option2.value = questions[questionIndex].optionList[0].Answer_Description;
    option3.value = questions[questionIndex].optionList[0].Answer_Description;
    option4.value = questions[questionIndex].optionList[0].Answer_Description;

    let lebal1 = document.getElementById("label1");
    let lebal2 = document.getElementById("label2");
    let lebal3 = document.getElementById("label3");
    let lebal4 = document.getElementById("label4");

    
    lebal1.innerHTML=questions[questionIndex].optionList[0].Answer_Description;
    lebal2.innerHTML=questions[questionIndex].optionList[1].Answer_Description;
    lebal3.innerHTML=questions[questionIndex].optionList[2].Answer_Description;
    lebal4.innerHTML=questions[questionIndex].optionList[3].Answer_Description;



    startTimer(true,questions[questionIndex].Timer);

    questionIndex++;


}



function openModal() {
  document.getElementById('gameOverModal').style.display = 'block';
}

function closeModal() {
  document.getElementById('gameOverModal').style.display = 'none';
}

function openInstructionModal() {
  document.getElementById('instructionModal').style.display = 'block';
  musicSound.pause();

}

function closeInstructionModal() {
  document.getElementById('instructionModal').style.display = 'none';
}

// Call openInstructionModal() when the page loads to show the instruction modal
window.onload = openInstructionModal;




// Add this JavaScript code to your existing code

function openModal() {
  document.getElementById('gameOverModal').style.display = 'block';
}

function closeModal() {
  document.getElementById('gameOverModal').style.display = 'none';
  musicSound.pause();

}

function gameOver() {
  openModal();
  musicSound.pause();


  document.getElementById('totalMarks').innerText = `${scores}`// Assuming score is your total marks
}

// Update your existing code where the game ends (after the last question)

// else block in the gameEngine() function





// pause the game






// Game Functions
function main(ctime) {
    window.requestAnimationFrame(main);
    if(start==true) {
    // console.log(ctime)
    if((ctime - lastPaintTime)/1000 < 1/speed){
        return;
    }
    lastPaintTime = ctime;
    gameEngine();
}
}

function isCollide(snake) {

    
    // If you bump into the wall    
    if(snake[0].x >= 18 || snake[0].x <=0 || snake[0].y >= 18 || snake[0].y <=0){
        return true;
    }
        
    // return false;
}

function gameEngine(){
    // Part 1: Updating the snake array & Food
    if(isCollide(snakeArr)){
        musicSound.pause();
        // inputDir =  {x: 0, y: 0}; 
        // snakeArr = [{x: 13, y: 15}];
        // alert("Game Over. Press any key to play again!");
        console.log("snake",snakeArr[0]);

        if (snakeArr[0].x >= 18) {
          snakeArr[0].x = 1; // Move to the leftmost column
      } else if (snakeArr[0].x <= 0) {
          snakeArr[0].x = 17; // Move to the rightmost column
      }
  
      if (snakeArr[0].y >= 18) {
          snakeArr[0].y = 1; // Move to the topmost row
      } else if (snakeArr[0].y <= 0) {
          snakeArr[0].y = 17; // Move to the bottommost row
      }
        // if(snakeArr[0].y<=0&& snakeArr[0].y%19==0){
        //   let x = snakeArr[0].x
        //  snakeArr.shift();
        //  snakeArr.unshift({x:x,y:-1});
        // }
        // else if(snakeArr[0].y)
        musicSound.play();
        
        // score = 0; 
    }


    // If you have eaten the food, increment the score and regenerate the food
    if(snakeArr[0].y === food.y && snakeArr[0].x ===food.x){
        foodSound.play();

        // alert("hello")
        if(questionIndex<questions.length){

            addQuiz();
        }
        else{
            // alert(`Game Over. Press any key to play again! your score is ${scores}`);
        snakeArr = [{x: 13, y: 15}];
        gameOver();
        musicSound.pause();

        // gameEngine().pause();
        
        gameOverSound.play();
        musicSound.pause();
        // musicSound.play(); 
        }
        

        score += 1;
        if(score>hiscoreval){
            hiscoreval = score;
            // localStorage.setItem("hiscore", JSON.stringify(hiscoreval));
            // hiscoreBox.innerHTML = "HiScore: " + hiscoreval;
        }
        // scoreBox.innerHTML = "Score: " + score;
        snakeArr.unshift({x: snakeArr[0].x + inputDir.x, y: snakeArr[0].y + inputDir.y});
        let a = 2;
        let b = 16;
        food = {x: Math.round(a + (b-a)* Math.random()), y: Math.round(a + (b-a)* Math.random())}
    }

    // Moving the snake
    for (let i = snakeArr.length - 2; i>=0; i--) { 
        snakeArr[i+1] = {...snakeArr[i]};
    }
    
    snakeArr[0].x += inputDir.x;
    snakeArr[0].y += inputDir.y;

    // Part 2: Display the snake and Food
    // Display the snake
    board.innerHTML = "";
    snakeArr.forEach((e, index)=>{
        snakeElement = document.createElement('div');
        snakeElement.style.gridRowStart = e.y;
        snakeElement.style.gridColumnStart = e.x;

        snakeElement.style.transform=rotate==0?"rotate(0)": rotate==1?"rotate(90)":rotate==2?"rotate(270)":"rotate(180)";
        if(index === 0){
            snakeElement.classList.add('head');
            snakeElement.style.transform = `rotate(${rotate}deg)`;
        }
        else{
            snakeElement.classList.add('snake');
        }
        board.appendChild(snakeElement);
    });
    // Display the food
    foodElement = document.createElement('div');
    foodElement.style.gridRowStart = food.y;
    foodElement.style.gridColumnStart = food.x;
    foodElement.classList.add('food')
    board.appendChild(foodElement);

}



// Main logic starts here
musicSound.play();
let hiscore = localStorage.getItem("hiscore");
if(hiscore === null){
    hiscoreval = 0;
    localStorage.setItem("hiscore", JSON.stringify(hiscoreval))
}
else{
    hiscoreval = JSON.parse(hiscore);
    hiscoreBox.innerHTML = "HiScore: " + hiscore;
}




window.requestAnimationFrame(main);

window.addEventListener('keydown', e => {
    inputDir = { x: 0, y: 1 }; // Start the game
    // musicSound.play();
    let snakehead = document.getElementsByClassName("head")[0];
      //  let snakehead = document.querySelector(".head");
  let styleValue = snakehead.style.transform;
    switch (e.key) {
        case "ArrowUp":
            console.log("ArrowUp");
            inputDir.x = 0;
            inputDir.y = -1;
            // rotate=0;
            snakehead.style.transform = "rotate(0deg)";
            break;

        case "ArrowDown":
            console.log("ArrowDown");
            inputDir.x = 0;
            inputDir.y = 1;
            // rotate=3;
            snakehead.style.transform = "rotate(180deg)";
            break;

        case "ArrowLeft":
            console.log("ArrowLeft");
            inputDir.x = -1;
            inputDir.y = 0;
            // rotate=2;
            snakehead.style.transform = "rotate(270deg)";
            break;

        case "ArrowRight":
            console.log("ArrowRight");
            inputDir.x = 1;
            inputDir.y = 0;
            // rotate=1;
            snakehead.style.transform = "rotate(90deg)";
            break;

        default:
          console.log(snakehead.style.transform,"sanjana");
          snakehead.style.transform=styleValue;
            break;
    }
});

// ... Your existing code ...

// Add touch event listeners for mobile controls
let touchStartX = 0;
let touchStartY = 0;

document.addEventListener('touchstart', handleTouchStart, false);
document.addEventListener('touchmove', handleTouchMove, false);
// musicSound.play();
 

function handleTouchStart(event) {
    touchStartX = event.touches[0].clientX;
    touchStartY = event.touches[0].clientY;
}

function handleTouchMove(event) {
    if (!touchStartX || !touchStartY) {
        return;
    }

    let touchEndX = event.touches[0].clientX;
    let touchEndY = event.touches[0].clientY;

    let deltaX = touchEndX - touchStartX;
    let deltaY = touchEndY - touchStartY;

    // Determine the direction based on the larger movement axis
    if (Math.abs(deltaX) > Math.abs(deltaY)) {
        // Horizontal movement
        inputDir.x = deltaX > 0 ? 1 : -1;
        inputDir.y = 0;
        // Set the rotation based on the direction
        // document.getElementsByClassName("head")[0].style.transform = inputDir.x === 1 ? "rotate(180deg)" : "rotate(0deg)";
    } else {
        // Vertical movement
        inputDir.x = 0;
        inputDir.y = deltaY > 0 ? 1 : -1;
        // Set the rotation based on the direction
        // document.getElementsByClassName("head")[0].style.transform = inputDir.y === 1 ? "rotate(90deg)" : "rotate(-90deg)";
    }

    touchStartX = 0;
    touchStartY = 0;
}

